<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex, nofollow" />
    <title>Edit Blog | Admin</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="src/style.css">
    <link rel="stylesheet" href="src/admin-styles.css">
    <link rel="stylesheet" href="src/editor-styles.css">
    <!-- Marked.js for Markdown Parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <!-- Cursor Follower -->
    <div class="cursor" id="cursor">
        <div class="cursor-dot"></div>
        <div class="cursor-outline"></div>
    </div>

    <!-- Three.js Canvas -->
    <canvas id="webgl-canvas"></canvas>

    <!-- Admin Header -->
    <header class="admin-header">
        <div class="admin-header-content">
            <a href="/admin-dashboard.html" class="admin-logo">VA <span>Admin</span></a>
            <nav class="admin-nav">
                <a href="/admin-dashboard.html" class="admin-nav-link">← Back to Dashboard</a>
                <button class="btn-primary" id="saveBtn">Save</button>
            </nav>
        </div>
    </header>

    <main class="editor-main">
        <div class="editor-container">
            <!-- Editor Sidebar -->
            <aside class="editor-sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Editor Mode</h3>
                    <select class="form-select" id="editorMode">
                        <option value="visual">Visual Editor</option>
                        <option value="markdown">Markdown Editor</option>
                    </select>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Status</h3>
                    <select class="form-select" id="blogStatus">
                        <option value="draft">Draft</option>
                        <option value="published">Published</option>
                        <option value="archived">Archived</option>
                    </select>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Category</h3>
                    <input type="text" class="form-input" id="blogCategory" placeholder="e.g., Performance" />
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Excerpt</h3>
                    <textarea class="form-textarea" id="blogExcerpt" rows="4"
                        placeholder="Brief description for blog listing..."></textarea>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Cover Image</h3>
                    <div class="cover-preview" id="coverPreview">
                        <span>No image selected</span>
                    </div>
                    <button class="btn-secondary btn-block" id="selectCoverBtn">Select Image</button>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Actions</h3>
                    <button class="btn-secondary btn-block" id="previewBtn">Preview</button>
                    <button class="btn-danger btn-block" id="deleteBtn" style="display: none;">Delete Post</button>
                </div>
            </aside>

            <!-- Editor Content -->
            <div class="editor-content">
                <!-- Title -->
                <input type="text" class="editor-title" id="blogTitle" placeholder="Blog Title..." />

                <!-- Toolbar -->
                <div class="editor-toolbar">
                    <div class="toolbar-group">
                        <button class="toolbar-btn" data-command="bold"
                            title="Bold (Ctrl+B)"><strong>B</strong></button>
                        <button class="toolbar-btn" data-command="italic" title="Italic (Ctrl+I)"><em>I</em></button>
                        <button class="toolbar-btn" data-command="underline"
                            title="Underline (Ctrl+U)"><u>U</u></button>
                        <div class="toolbar-separator"></div>
                        <div class="color-picker-wrapper" title="Background Color">
                            <span class="color-icon">A</span>
                            <input type="color" id="bgColorPicker" class="color-picker" value="#ffff00">
                        </div>
                    </div>
                    <div class="toolbar-divider"></div>
                    <div class="toolbar-group">
                        <button class="toolbar-btn" data-command="formatBlock" data-value="h2"
                            title="Heading 2">H2</button>
                        <button class="toolbar-btn" data-command="formatBlock" data-value="h3"
                            title="Heading 3">H3</button>
                        <button class="toolbar-btn" data-command="formatBlock" data-value="p"
                            title="Paragraph">¶</button>
                    </div>
                    <div class="toolbar-divider"></div>
                    <div class="toolbar-group">
                        <button class="toolbar-btn" data-command="insertUnorderedList" title="Bullet List">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="8" y1="6" x2="21" y2="6" />
                                <line x1="8" y1="12" x2="21" y2="12" />
                                <line x1="8" y1="18" x2="21" y2="18" />
                                <circle cx="3" cy="6" r="1.5" fill="currentColor" />
                                <circle cx="3" cy="12" r="1.5" fill="currentColor" />
                                <circle cx="3" cy="18" r="1.5" fill="currentColor" />
                            </svg>
                        </button>
                        <button class="toolbar-btn" data-command="insertOrderedList" title="Numbered List">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="10" y1="6" x2="21" y2="6" />
                                <line x1="10" y1="12" x2="21" y2="12" />
                                <line x1="10" y1="18" x2="21" y2="18" />
                            </svg>
                        </button>
                    </div>
                    <div class="toolbar-divider"></div>
                    <div class="toolbar-group">
                        <button class="toolbar-btn" id="insertLinkBtn" title="Insert Link">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
                            </svg>
                        </button>
                        <button class="toolbar-btn" id="insertImageBtn" title="Insert Image">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                                <circle cx="8.5" cy="8.5" r="1.5" />
                                <polyline points="21 15 16 10 5 21" />
                            </svg>
                        </button>
                        <button class="toolbar-btn" id="insertCodeBtn" title="Insert Code Block">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="16 18 22 12 16 6" />
                                <polyline points="8 6 2 12 8 18" />
                            </svg>
                        </button>
                    </div>
                    <div class="toolbar-divider"></div>
                    <div class="toolbar-group">
                        <button class="toolbar-btn" id="importMarkdownBtn" title="Import Markdown">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                        </button>
                        <input type="file" id="markdownUpload" accept=".md" hidden />
                    </div>
                </div>

                <!-- Content Editor -->
                <div class="editor-body" id="editorBody" contenteditable="true">
                    <p>Start writing your blog post...</p>
                </div>
                <!-- Markdown Editor -->
                <textarea class="editor-body code-input" id="markdownEditor" style="display: none; padding: 1.5rem;"
                    placeholder="# Start writing in Markdown..."></textarea>
            </div>
        </div>
    </main>

    <!-- Image Gallery Modal -->
    <div class="modal" id="imageModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 class="modal-title">Image Gallery</h3>
                <button class="modal-close" id="closeImageModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="imageUpload" accept="image/*" hidden />
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="17 8 12 3 7 8" />
                        <line x1="12" y1="3" x2="12" y2="15" />
                    </svg>
                    <p>Click or drag to upload an image</p>
                </div>
                <div class="gallery-grid" id="galleryGrid"></div>
            </div>
        </div>
    </div>

    <!-- Link Modal -->
    <div class="modal" id="linkModal">
        <div class="modal-content">
            <h3 class="modal-title">Insert Link</h3>
            <div class="form-group">
                <label class="form-label">URL</label>
                <input type="url" class="form-input" id="linkUrl" placeholder="https://..." />
            </div>
            <div class="form-group">
                <label class="form-label">Text</label>
                <input type="text" class="form-input" id="linkText" placeholder="Link text" />
            </div>
            <div class="modal-actions">
                <button class="btn-secondary" id="cancelLink">Cancel</button>
                <button class="btn-primary" id="insertLink">Insert</button>
            </div>
        </div>
    </div>

    <!-- Code Block Modal -->
    <div class="modal" id="codeModal">
        <div class="modal-content modal-large">
            <h3 class="modal-title">Insert Code Block</h3>
            <div class="form-group">
                <label class="form-label">Language</label>
                <select class="form-select" id="codeLanguage">
                    <option value="sql">SQL</option>
                    <option value="python">Python</option>
                    <option value="javascript">JavaScript</option>
                    <option value="json">JSON</option>
                    <option value="bash">Bash</option>
                    <option value="text">Plain Text</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Code</label>
                <textarea class="form-textarea code-input" id="codeContent" rows="10"
                    placeholder="Paste your code here..."></textarea>
            </div>
            <div class="modal-actions">
                <button class="btn-secondary" id="cancelCode">Cancel</button>
                <button class="btn-primary" id="insertCode">Insert</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <h3 class="modal-title">Confirm Import</h3>
            <p>This will replace all current content in the editor. Are you sure you want to continue?</p>
            <div class="modal-actions">
                <button class="btn-secondary" id="cancelConfirm">Cancel</button>
                <button class="btn-primary" id="confirmImport">Import</button>
            </div>
        </div>
    </div>

    <script type="module" src="src/blog-editor.js"></script>
</body>

</html>